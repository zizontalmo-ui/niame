<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ğŸ“¸ ë¸”ë¡­í”¼ì‰¬ ê°¤ëŸ¬ë¦¬</title>
    <link rel="stylesheet" href="styles.css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="app_supabase.js"></script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
  </head>
  <body class="bg-gray-100 min-h-screen">
    <header
      class="bg-white shadow p-4 flex justify-between items-center sticky top-0 z-50"
    >
      <div class="flex items-center gap-3">
        <!-- ë¸”ë¡­í”¼ì‰¬ ë¡œê³  -->
        <div class="logo-container relative w-12 h-12">
          <img
            src="./assets/logo.png"
            alt="ë¸”ë¡­í”¼ì‰¬ ë¡œê³ "
            class="w-full h-full object-contain rounded-full shadow"
          />
        </div>
        <!-- ì œëª© í´ë¦­ ì‹œ ìƒˆë¡œê³ ì¹¨ -->
        <h1
          id="homeTitle"
          class="font-bold text-xl text-gray-800 cursor-pointer"
        >
          ë”˜ë”˜ë¸”ë¡­ ì‹¤ì‹œê°„ ê°¤ëŸ¬ë¦¬
        </h1>
      </div>

      <!-- ë¡œê·¸ì¸/ì‚¬ìš©ì ì˜ì—­ + ë§¤ì  ë²„íŠ¼ -->
      <div class="flex items-center gap-2">
        <div id="userSection"></div>
        <button
          id="buySnackBtn"
          class="bg-pink-600 text-white px-4 py-2 rounded hover:bg-pink-700 transition text-sm"
        >
          ë¸”ë¡­í”¼ì‰¬ ë¨¹ì´ì£¼ê¸°
        </button>
      </div>
    </header>

    <main class="max-w-5xl mx-auto p-4">
      <!-- ì—…ë¡œë“œ ì„¹ì…˜ -->
      <section
        id="uploadSection"
        class="hidden bg-white p-4 rounded shadow mb-6"
      >
        <input type="file" id="fileInput" class="mb-2 w-full" />
        <input
          type="text"
          id="titleInput"
          placeholder="ì œëª©"
          class="w-full border p-2 mb-2 rounded"
        />
        <input
          type="text"
          id="keywordsInput"
          placeholder="í‚¤ì›Œë“œ, ì‰¼í‘œ êµ¬ë¶„"
          class="w-full border p-2 mb-2 rounded"
        />
        <input
          type="text"
          id="tagsInput"
          placeholder="#íƒœê·¸"
          class="w-full border p-2 mb-2 rounded"
        />
        <button
          id="uploadBtn"
          class="bg-blue-600 text-white px-4 py-2 rounded w-full"
        >
          ì—…ë¡œë“œ
        </button>
      </section>

      <!-- ê²€ìƒ‰ & ì •ë ¬ -->
      <div class="flex gap-2 mb-4">
        <input
          type="text"
          id="searchInput"
          placeholder="ê²€ìƒ‰ì–´"
          class="flex-1 border p-2 rounded"
        />
        <select id="sortSelect" class="border p-2 rounded">
          <option value="newest">ìµœì‹ ìˆœ</option>
          <option value="likes">ì¢‹ì•„ìš”ìˆœ</option>
          <option value="title">ì œëª©ìˆœ</option>
        </select>
      </div>

      <!-- ê°¤ëŸ¬ë¦¬ -->
      <table class="w-full border-t border-gray-300 bg-white shadow rounded">
        <thead class="bg-gray-50">
          <tr class="border-b border-gray-300">
            <th class="p-2 w-12">ë²ˆí˜¸</th>
            <th class="p-2 text-left">ì œëª©</th>
            <th class="p-2 w-20">ì¢‹ì•„ìš”</th>
            <th class="p-2 w-32">ì‘ì„±ì¼</th>
          </tr>
        </thead>
        <tbody id="gallery"></tbody>
      </table>
    </main>

    <!-- í™ˆ ì œëª© í´ë¦­ ì‹œ ìƒˆë¡œê³ ì¹¨ + ë§¤ì  ë²„íŠ¼ íŒì—… -->
    <script>
      // í™ˆ ì œëª© ìƒˆë¡œê³ ì¹¨
      document.getElementById("homeTitle")?.addEventListener("click", () => {
        location.reload();
      });

      // ë§¤ì  ì‚¬ì£¼ê¸° ë²„íŠ¼ íŒì—…
      const snackBtn = document.getElementById("buySnackBtn");

      snackBtn.addEventListener("click", () => {
        const popup = document.createElement("div");
        popup.className =
          "fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50";
        popup.innerHTML = `
        <div class="bg-white p-10 rounded shadow-lg max-w-4xl w-full text-center relative">
  <h1 class="text-[150%] font-bold leading-tight">
    ì´ ê°€ì—¾ì€ ë¸”ë¡­ì´ì—ê²Œ ë¨¹ê±°ë¦¬ë¥¼ í›„ì›í•´ì£¼ì„¸ìš”...
  </h1>
  <img src="./assets/sillyblob.jpg" alt="sillyblob" class="w-[350px] mx-auto py-3">
  <h3 class="text-lg font-bold my-6">ë¸”ë¡­í”¼ì‰¬ ì‚¬ìœ¡ì‚¬ ê³„ì¢Œë²ˆí˜¸</h3>
  
  <p id="accountNumber" 
     class="text-gray-800 font-mono mb-6 cursor-pointer select-all text-xl">
    1908-9595-5553
  </p>
  
  <button id="closePopup" 
          class="bg-blue-600 text-white px-6 py-3 rounded hover:bg-blue-700 transition">
    ë‹«ê¸°
  </button>
</div>

      `;
        document.body.appendChild(popup);

        const accountDiv = document.getElementById("accountNumber");
        accountDiv.addEventListener("click", () => {
          navigator.clipboard.writeText(accountDiv.textContent).then(() => {
            alert("ê³„ì¢Œë²ˆí˜¸ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!");
          });
        });

        document.getElementById("closePopup").addEventListener("click", () => {
          popup.remove();
        });

        popup.addEventListener("click", (e) => {
          if (e.target === popup) popup.remove();
        });
      });
    </script>
  </body>
</html>
